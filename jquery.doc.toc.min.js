$.fn.docToc=function(e){var q={nav:null,container:$(window),activeChange:function(a,d){$(a).css("cssText","color: #8E8E8E; border-left-color: #cacaca; font-weight: 400;");$(d).css("cssText","color: #2f2f2f !important; border-left-color: #2f2f2f; font-weight: 500;")},getFixedTop:function(){return 20},getTop:function(){return 200},getRight:function(){return 10},getLeft:null,calPosition:function(a,d){void 0==a&&(a=$(this).scrollTop());void 0==d&&(d=this.getTop());var c=this.getFixedTop();a-d>-1*c?b.css({top:c,position:"fixed"}):b.css({top:d,position:""});$.isFunction(this.getLeft)?b.css({left:this.getLeft()}):$.isFunction(this.getRight)?b.css({right:this.getRight()}):console.error("\u672a\u5b9a\u4e49getRight()\u6216\u8005getLeft()")}},f=$.extend({},q,e||{});e=$(this);var c=f.container;if(!c.length||0==$(e).find(":header").length)return e;var k=$(this).find("h"+f.start_level),b=f.nav,h=c[0]==window;b||(b=$('<div class="doc-toc"></div>'),l=$('<div class="doc-toc"></div>'));if(""==b.html()){var p=$("<ul></ul>");$(e).find(":header").each(function(){var a=this.id?"#"+this.id:"javascript:;";a=$("<li></li>").append($('<a href="'+a+'" title="'+(this.textContent||this.innerHTML)+'">'+this.innerHTML+"</a>").data("target",$(this)));p.append(a)});b.append(p);k=$(e).find(":header")}0==document.body.contains(b[0])&&(h?$("body").append(b):c.append(b));var m=f.getTop();f.calPosition($(this).scrollTop(),m);c.on("resize",function(){var a=$(this).scrollTop();m=f.getTop();f.calPosition(a,m)});c.on("scroll",function(){var a=0,d=h?0:c[0].getBoundingClientRect().top,n=$(this).scrollTop(),g=document.documentElement.scrollHeight||document.body.scrollHeight;h||(g=c[0].scrollHeight);c.height()+n>=g-1?a=k.length-1:k.each(function(c){if(0<=this.getBoundingClientRect().top-d||c===k.length-1)return a=c,!1});g=null;g=$(l).is(":visible")?l.find("li"):b.find("li");var e=g.eq(a);0==e.hasClass("active")&&(g.removeClass("active"),e.addClass("active"),$.isFunction(f.activeChange)&&f.activeChange.call(f,g,e));f.calPosition(n,m)});$(b).on("click","a",function(a){var d=$(this).attr("href"),b=$(this).data("target")||$(d),e=b.find("a").index($(this));b.length||(b=b.eq(e));/^#/.test(d)&&a.preventDefault();a=document.documentElement.scrollHeight||document.body.scrollHeight;h||(a=c[0].scrollHeight);d=h?0:c[0].getBoundingClientRect().top;d=b.offset().top-d;d+c.height()>a-2&&e!==b.find("a").length-1&&(d=a-c.height()-2);(h?$("html, body"):c).animate({scrollTop:d-f.getFixedTop()})});c.trigger("scroll");var l=b.clone(!0);l.css({position:"static"});$(e).prepend(l);return k};